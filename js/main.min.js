function how_may_days(e,t){return(new Date(t,e,0)).getDate()}var per=function(e,t){var n=e*100/t;return n},single_bar=function(e){single="";return single},status_ok=function(e){oks=0;for(var t=0;t<e;t++)$(".year .day").eq(t).find(".face").hasClass("ok")&&oks++;return oks},status_ko=function(e){kos=0;for(var t=0;t<e;t++)$(".year .day").eq(t).find(".face").hasClass("ko")&&kos++;return kos},dow_stats=function(e){var t=0,n=0,r=$(".year .active."+e+" .face").length,i="";$(".year .active."+e+" .face").each(function(){$(this).hasClass("ok")?t++:n++});if(t>=n){i=e+"("+r+"): "+t+" días buenos / "+n+" días malos. // "+per(t,r).toFixed(1)+"% Buenos";i=per(t,r).toFixed(2)}else{i=e+"("+r+"): "+t+" días buenos / "+n+" días malos. // "+per(n,r).toFixed(1)+"% Malos";i=per(n,r).toFixed(2)*-1}return i},consecutive_days=function(e){if(e!="ok"||e!="ko")e="ok";var t=0,n=0;$(".year .active .face").each(function(r){if($(this).hasClass(e))n++;else{n>=t&&(t=n);n=0}n>=t&&(t=n)});return t};$(document).ready(function(){if(window.location.hash!=""){var e=window.location.hash.replace("#","");if(Number(e)&&e>0&&e<=$(".year .day").length){$(".year").addClass("fullscreen");$(".year .day").eq(e-1).addClass("sel");var t="";if($(".year .day.sel .face").parent(".day").hasClass("bday"))t="bday";else{t=$(".year .day.sel .face").attr("class");t=t.replace("face","").replace(" ","")}}else window.location.hash=""}$("li .face").click(function(){$(".year").toggleClass("fullscreen");$(this).parent("li").toggleClass("sel");if($(".year").hasClass("fullscreen"))if($(".year .day.sel .face").parent(".day").hasClass("bday"))t="bday";else{t=$(".year .day.sel .face").attr("class");t=t.replace("face","").replace(" ","")}if(window.location.hash==""){window.location.hash="";window.location.hash=$(".year .day.sel").data("day")}else window.location.hash=""});if($(".stats").length>0){var n=$(".stats .good.days").data("value")+$(".stats .bad.days").data("value"),r=$(".stats .good.days").data("value")*100/n,i=100-r;$(".stats .good.days").append('<span class="value">'+$(".stats .good.days").data("value")+"</span>");$(".stats .bad.days").append('<span class="value">'+$(".stats .bad.days").data("value")+"</span>");$(".stats .good.days").animate({width:r+"%"},5e3);$(".stats .bad.days").animate({width:i+"%"},5e3)}var s=0,o=new Array,u=new Array;$(".face").each(function(e){if($(this).hasClass("ok")){s+=1;u[e]=1}else if($(this).hasClass("ko")){s-=1;u[e]=-1}else{s+=0;u[e]=0}o[e]=s});bar='<ul class="week bars">';var a=7,f=new Array("monday","tuesday","wednesday","thursday","friday","saturday","sunday");for(var l=0;l<a;l++){bar_value=dow_stats(f[l]);var c="good";bar_value<0&&(c="bad");bar+='<li class="bar '+c+'" style="width:'+per(1,a)+'%"><div class="progress" style="height:'+Math.abs(bar_value)+'%"></div><div class="number">'+f[l]+"</div></li>"}bar+="</ul>"});